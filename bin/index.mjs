#!/usr/bin/env node
import t from"fs";import{Command as D}from"commander";import m from"obtain-git-repo";import s from"chalk";import E from"inquirer";import U from"ora";var b="fast-pkg-cli",k="1.0.2",v="\u5F00\u53D1npm\u63D2\u4EF6\u7684cli\u5DE5\u5177\u3002",w="bin/index.mjs",x=["bin"],S={"fast-pkg-cli":"bin/index.mjs"},j={dev:"pnpm build -- --watch",build:"tsup src/index.ts --dts --format esm",prepublishOnly:"pnpm build",test:'echo "Error: no test specified" && exit 1'},$={"@types/inquirer":"^8.2.0","@types/node":"^17.0.16",tsup:"^5.11.13",typescript:"^4.5.5"},q={type:"git",url:"git+https://github.com/asasugar/fast-pkg-cli.git"},N=["cli","fast-pkg-cli"],O="asasugar <xxj95719@gmail.com>",J="MIT",T={url:"https://github.com/asasugar/fast-pkg-cli/issues"},F="https://github.com/asasugar/fast-pkg-cli#readme",I="pnpm@6.30.0",M={node:">=12.0.0"},C={chalk:"^5.0.0",commander:"^9.0.0",inquirer:"^8.2.0",ora:"^6.0.1","obtain-git-repo":"^1.0.1"},c={name:b,version:k,description:v,main:w,files:x,bin:S,scripts:j,devDependencies:$,repository:q,keywords:N,author:O,license:J,bugs:T,homepage:F,packageManager:I,engines:M,dependencies:C};m("","",{},()=>{});var _=new D,z=[{type:"list",message:"\u8BF7\u9009\u62E9\u5F00\u53D1\u9879\u76EE\u7684\u8BED\u8A00? ",name:"type",choices:["TypeScript"]},{type:"input",message:"\u9879\u76EE\u540D\u79F0: ",name:"name",default:"my-plugin"},{type:"input",message:"\u9879\u76EE\u63CF\u8FF0: ",name:"description",default:""},{type:"input",message:"\u521D\u59CB\u7248\u672C: ",name:"version",default:"1.0.0"}];_.version(c.version,"-v, --version").command("init <pkgName>").action(async l=>{if(t.existsSync(l)){console.log(s.red("\u9879\u76EE\u5DF2\u5B58\u5728"));return}let{type:g,name:n,description:u,version:f}=await E.prompt(z),a="";g==="TypeScript"&&(a="asasugar/plugin-tstemp");let o=U("\u6B63\u5728\u4ECEgithub\u4E0B\u8F7D...").start();m(a,n,{},function(d){d?(o.warn("\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u5728https://github.com/asasugar/pkg-cli/issues\uFF0CIssues\u7559\u8A00"),process.exit()):(o.clear(),console.info(""),console.info(s.green("-----------------------------------------------------")),console.info(""),o.succeed("\u9879\u76EE\u521B\u5EFA\u6210\u529F,\u8BF7\u7EE7\u7EED\u8FDB\u884C\u4EE5\u4E0B\u64CD\u4F5C:"),console.info(""),console.info(s.gray("\u5B89\u88C5pnpm\u53C2\u8003\u6587\u6863: https://github.com/pnpm/pnpm")),console.info(""),console.info(s.cyan(` -  cd ${n}`)),console.info(s.cyan(" -  pnpm install")),console.info(s.cyan(" -  pnpm dev")),console.info(s.cyan(" -  pnpm build")),console.info(""),console.info(s.gray("\u53C2\u8003\u6587\u6863: https://github.com/asasugar/pkg-cli/")),console.info(""),console.info(s.green("-----------------------------------------------------")),console.info(""),t.readFile(`${process.cwd()}/${n}/package.json`,(p,y)=>{if(p)throw p;let i=JSON.parse(y.toString());i.name=n,i.description=u,i.version=f;let h=JSON.stringify(i,null,4);t.writeFile(`${process.cwd()}/${n}/package.json`,h,function(r){if(r)throw r;process.exit()})}))})}).parse(process.argv);
//# sourceMappingURL=index.mjs.map